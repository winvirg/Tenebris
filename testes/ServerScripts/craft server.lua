
local categoryList = 11
local list = {}
for i=1, categoryList do
	list[i] = {dataID = {}, guide = {}, count = {}, chance = {}, gold = {}}
end
list[1].dataID[1] = 497
list[1].guide[1] = {473}
list[1].count[1] = {15}
list[1].chance[1] = 100
list[1].gold[1] = 100

list[1].dataID[2] = 498
list[1].guide[2] = {474}
list[1].count[2] = {15}
list[1].chance[2] = 100
list[1].gold[2] = 100

list[1].dataID[3] = 499
list[1].guide[3] = {475}
list[1].count[3] = {15}
list[1].chance[3] = 100
list[1].gold[3] = 100

list[1].dataID[4] = 500
list[1].guide[4] = {476}
list[1].count[4] = {15}
list[1].chance[4] = 100
list[1].gold[4] = 100

list[1].dataID[5] = 501
list[1].guide[5] = {483}
list[1].count[5] = {15}
list[1].chance[5] = 100
list[1].gold[5] = 100

list[1].dataID[6] = 503
list[1].guide[6] = {477, 492}
list[1].count[6] = {10, 1}
list[1].chance[6] = 100
list[1].gold[6] = 100

list[1].dataID[7] = 504
list[1].guide[7] = {478, 493}
list[1].count[7] = {10, 1}
list[1].chance[7] = 100
list[1].gold[7] = 100

list[1].dataID[8] = 505
list[1].guide[8] = {479, 493}
list[1].count[8] = {10, 1}
list[1].chance[8] = 100
list[1].gold[8] = 100

list[1].dataID[9] = 506
list[1].guide[9] = {480, 494}
list[1].count[9] = {10, 1}
list[1].chance[9] = 100
list[1].gold[9] = 100

list[1].dataID[10] = 507
list[1].guide[10] = {481, 494}
list[1].count[10] = {10, 1}
list[1].chance[10] = 100
list[1].gold[10] = 100

list[1].dataID[11] = 508
list[1].guide[11] = {482, 495}
list[1].count[11] = {10, 1}
list[1].chance[11] = 100
list[1].gold[11] = 100

list[1].dataID[12] = 486
list[1].guide[12] = {503}
list[1].count[12] = {10}
list[1].chance[12] = 100
list[1].gold[12] = 30000

list[1].dataID[13] = 487
list[1].guide[13] = {504}
list[1].count[13] = {10}
list[1].chance[13] = 100
list[1].gold[13] = 30000

list[1].dataID[14] = 488
list[1].guide[14] = {505}
list[1].count[14] = {10}
list[1].chance[14] = 100
list[1].gold[14] = 30000

list[1].dataID[15] = 489
list[1].guide[15] = {506}
list[1].count[15] = {15}
list[1].chance[15] = 100
list[1].gold[15] = 30000

list[1].dataID[16] = 490
list[1].guide[16] = {507}
list[1].count[16] = {15}
list[1].chance[16] = 100
list[1].gold[16] = 30000

list[1].dataID[17] = 528
list[1].guide[17] = {472}
list[1].count[17] = {100}
list[1].chance[17] = 100
list[1].gold[17] = 0

list[1].dataID[18] = 529
list[1].guide[18] = {472}
list[1].count[18] = {500}
list[1].chance[18] = 100
list[1].gold[18] = 0

list[2].dataID[1] = 511
list[2].guide[1] = {503}
list[2].count[1] = {10}
list[2].chance[1] = 100
list[2].gold[1] = 100

list[2].dataID[2] = 512
list[2].guide[2] = {504}
list[2].count[2] = {10}
list[2].chance[2] = 100
list[2].gold[2] = 100

list[2].dataID[3] = 513
list[2].guide[3] = {505}
list[2].count[3] = {10}
list[2].chance[3] = 100
list[2].gold[3] = 100

list[2].dataID[4] = 514
list[2].guide[4] = {506}
list[2].count[4] = {15}
list[2].chance[4] = 100
list[2].gold[4] = 100

list[2].dataID[5] = 515
list[2].guide[5] = {507}
list[2].count[5] = {15}
list[2].chance[5] = 100
list[2].gold[5] = 100

list[2].dataID[6] = 530
list[2].guide[6] = {518}
list[2].count[6] = {100}
list[2].chance[6] = 100
list[2].gold[6] = 0

list[2].dataID[7] = 531
list[2].guide[7] = {518}
list[2].count[7] = {500}
list[2].chance[7] = 100
list[2].gold[7] = 0

list[3].dataID[1] = 463
list[3].guide[1] = {504, 498, 497}
list[3].count[1] = {20, 10, 20}
list[3].chance[1] = 100
list[3].gold[1] = 100

list[3].dataID[2] = 464
list[3].guide[2] = {504, 505, 498, 501}
list[3].count[2] = {30, 20, 20, 5}
list[3].chance[2] = 100
list[3].gold[2] = 100

list[3].dataID[3] = 465
list[3].guide[3] = {505, 507, 500, 501, 508}
list[3].count[3] = {30, 10, 10, 10, 5}
list[3].chance[3] = 100
list[3].gold[3] = 100

list[4].dataID[1] = 310
list[4].guide[1] = {504, 503, 497}
list[4].count[1] = {8, 8, 4}
list[4].chance[1] = 87
list[4].gold[1] = 90000

list[4].dataID[2] = 311
list[4].guide[2] = {504, 503, 498}
list[4].count[2] = {10, 12, 10}
list[4].chance[2] = 84
list[4].gold[2] = 140000

list[4].dataID[3] = 313
list[4].guide[3] = {504, 503, 505, 506, 497, 499}
list[4].count[3] = {20, 15, 5, 1, 10, 3}
list[4].chance[3] = 76
list[4].gold[3] = 240000

list[4].dataID[4] = 314
list[4].guide[4] = {504, 503, 505, 506, 497}
list[4].count[4] = {30, 20, 10, 3, 20}
list[4].chance[4] = 70
list[4].gold[4] = 290000

list[4].dataID[5] = 315
list[4].guide[5] = {504, 503, 505, 506, 507, 501}
list[4].count[5] = {50, 20, 10, 5, 5, 10}
list[4].chance[5] = 56
list[4].gold[5] = 395000

list[4].dataID[6] = 316
list[4].guide[6] = {504, 506, 507, 508, 498, 501}
list[4].count[6] = {30, 35, 5, 10, 30, 20}
list[4].chance[6] = 40
list[4].gold[6] = 595000

list[5].dataID[1] = 60
list[5].guide[1] = {504, 503, 498}
list[5].count[1] = {8, 10, 5}
list[5].chance[1] = 84
list[5].gold[1] = 100000

list[5].dataID[2] = 61
list[5].guide[2] = {504, 503, 497}
list[5].count[2] = {10, 10, 10}
list[5].chance[2] = 82
list[5].gold[2] = 150000

list[5].dataID[3] = 62
list[5].guide[3] = {504, 503, 505, 497}
list[5].count[3] = {15, 13, 5, 15}
list[5].chance[3] = 79
list[5].gold[3] = 200000

list[5].dataID[4] = 64
list[5].guide[4] = {504, 503, 505, 506, 497, 499}
list[5].count[4] = {30, 20, 10, 5, 20, 10}
list[5].chance[4] = 70
list[5].gold[4] = 300000

list[5].dataID[5] = 65
list[5].guide[5] = {504, 505, 506, 507, 499, 500}
list[5].count[5] = {50, 30, 10, 5, 20, 4}
list[5].chance[5] = 55
list[5].gold[5] = 400000

list[5].dataID[6] = 66
list[5].guide[6] = {504, 505, 506, 507, 508, 501}
list[5].count[6] = {30, 20, 50, 15, 10, 10}
list[5].chance[6] = 40
list[5].gold[6] = 650000

list[6].dataID[1] = 119
list[6].guide[1] = {12, 17}
list[6].count[1] = {1, 1}
list[6].chance[1] = 100
list[6].gold[1] = 1

list[6].dataID[2] = 111
list[6].guide[2] = {504, 503, 498}
list[6].count[2] = {8, 10, 10}
list[6].chance[2] = 83
list[6].gold[2] = 130000

list[6].dataID[3] = 113
list[6].guide[3] = {504, 503, 505, 506, 497, 499}
list[6].count[3] = {25, 15, 6, 1, 10, 1}
list[6].chance[3] = 75
list[6].gold[3] = 240000

list[6].dataID[4] = 114
list[6].guide[4] = {504, 503, 505, 506, 497}
list[6].count[4] = {30, 20, 10, 3, 20}
list[6].chance[4] = 70
list[6].gold[4] = 280000

list[6].dataID[5] = 115
list[6].guide[5] = {504, 503, 506, 507, 500}
list[6].count[5] = {40, 30, 10, 5, 15}
list[6].chance[5] = 56
list[6].gold[5] = 380000

list[6].dataID[6] = 116
list[6].guide[6] = {504, 503, 506, 507, 508, 501}
list[6].count[6] = {50, 40, 20, 10, 8, 10}
list[6].chance[6] = 40
list[6].gold[6] = 590000

list[7].dataID[1] = 200
list[7].guide[1] = {503, 504, 497}
list[7].count[1] = {15, 10, 5}
list[7].chance[1] = 35
list[7].gold[1] = 200000

list[7].dataID[2] = 201
list[7].guide[2] = {504, 503, 498}
list[7].count[2] = {25, 10, 10}
list[7].chance[2] = 32
list[7].gold[2] = 350000

list[7].dataID[3] = 202
list[7].guide[3] = {504, 503, 506, 498}
list[7].count[3] = {30, 15, 3, 10}
list[7].chance[3] = 29
list[7].gold[3] = 400000

list[7].dataID[4] = 203
list[7].guide[4] = {504, 503, 505, 499}
list[7].count[4] = {20, 15, 20, 10}
list[7].chance[4] = 28
list[7].gold[4] = 500000

list[7].dataID[5] = 204
list[7].guide[5] = {504, 503, 505, 499}
list[7].count[5] = {15, 10, 20, 3, 20}
list[7].chance[5] = 26
list[7].gold[5] = 700000

list[7].dataID[6] = 205
list[7].guide[6] = {504, 503, 506, 498}
list[7].count[6] = {15, 10, 15, 20}
list[7].chance[6] = 24
list[7].gold[6] = 950000

list[7].dataID[7] = 206
list[7].guide[7] = {504, 503, 507, 497, 500}
list[7].count[7] = {20, 20, 5, 10, 10}
list[7].chance[7] = 22
list[7].gold[7] = 1050000

list[7].dataID[8] = 207
list[7].guide[8] = {504, 503, 506, 498, 508}
list[7].count[8] = {20, 10, 20, 20, 1}
list[7].chance[8] = 21
list[7].gold[8] = 1200000

list[7].dataID[9] = 208
list[7].guide[9] = {504, 503, 507, 497, 500, 508}
list[7].count[9] = {25, 15, 15, 10, 20, 3}
list[7].chance[9] = 20
list[7].gold[9] = 1300000

list[7].dataID[10] = 209
list[7].guide[10] = {504, 503, 506, 507, 508, 501}
list[7].count[10] = {30, 20, 10, 10, 5, 10}
list[7].chance[10] = 15
list[7].gold[10] = 1500000

list[8].dataID[1] = 150
list[8].guide[1] = {504, 503, 497}
list[8].count[1] = {6, 4, 10}
list[8].chance[1] = 45
list[8].gold[1] = 150000

list[8].dataID[2] = 151
list[8].guide[2] = {504, 503, 498}
list[8].count[2] = {8, 5, 10}
list[8].chance[2] = 44
list[8].gold[2] = 170000

list[8].dataID[3] = 152
list[8].guide[3] = {504, 503, 497}
list[8].count[3] = {8, 8, 15}
list[8].chance[3] = 43
list[8].gold[3] = 200000

list[8].dataID[4] = 153
list[8].guide[4] = {504, 503, 497}
list[8].count[4] = {10, 15, 20}
list[8].chance[4] = 42
list[8].gold[4] = 250000

list[8].dataID[5] = 154
list[8].guide[5] = {504, 503, 498}
list[8].count[5] = {30, 5, 5}
list[8].chance[5] = 41
list[8].gold[5] = 300000

list[8].dataID[6] = 155
list[8].guide[6] = {504, 503, 498}
list[8].count[6] = {20, 10, 20}
list[8].chance[6] = 40
list[8].gold[6] = 350000

list[8].dataID[7] = 156
list[8].guide[7] = {504, 503, 506, 498}
list[8].count[7] = {20, 10, 2, 15}
list[8].chance[7] = 35
list[8].gold[7] = 400000

list[8].dataID[8] = 157
list[8].guide[8] = {504, 503, 506, 507, 497}
list[8].count[8] = {15, 15, 2, 2, 10}
list[8].chance[8] = 34
list[8].gold[8] = 430000

list[8].dataID[9] = 158
list[8].guide[9] = {504, 503, 506, 507, 498}
list[8].count[9] = {20, 5, 5, 2, 10}
list[8].chance[9] = 33
list[8].gold[9] = 450000

list[8].dataID[10] = 159
list[8].guide[10] = {504, 503, 506, 507, 498}
list[8].count[10] = {20, 10, 5, 1, 20}
list[8].chance[10] = 32
list[8].gold[10] = 470000

list[8].dataID[11] = 160
list[8].guide[11] = {504, 503, 505, 507, 497}
list[8].count[11] = {10, 15, 10, 5, 10}
list[8].chance[11] = 31
list[8].gold[11] = 490000

list[8].dataID[12] = 161
list[8].guide[12] = {504, 505, 499}
list[8].count[12] = {10, 20, 20}
list[8].chance[12] = 30
list[8].gold[12] = 500000

list[8].dataID[13] = 162
list[8].guide[13] = {504, 503, 505, 507, 497}
list[8].count[13] = {10, 5, 10, 8, 10}
list[8].chance[13] = 29
list[8].gold[13] = 550000

list[8].dataID[14] = 163
list[8].guide[14] = {504, 503, 505, 507, 506, 499}
list[8].count[14] = {10, 10, 10, 5, 3, 10}
list[8].chance[14] = 28
list[8].gold[14] = 590000

list[8].dataID[15] = 164
list[8].guide[15] = {504, 503, 506, 498}
list[8].count[15] = {15, 10, 15, 20}
list[8].chance[15] = 27
list[8].gold[15] = 620000

list[8].dataID[16] = 165
list[8].guide[16] = {504, 503, 505, 507, 497, 500}
list[8].count[16] = {15, 8, 12, 10, 20, 5}
list[8].chance[16] = 26
list[8].gold[16] = 650000

list[8].dataID[17] = 166
list[8].guide[17] = {504, 503, 505, 507, 499, 497}
list[8].count[17] = {15, 5, 10, 5, 15, 15}
list[8].chance[17] = 25
list[8].gold[17] = 700000

list[8].dataID[18] = 167
list[8].guide[18] = {504, 503, 505, 499, 497}
list[8].count[18] = {15, 10, 15, 20, 20}
list[8].chance[18] = 24
list[8].gold[18] = 800000

list[8].dataID[19] = 168
list[8].guide[19] = {504, 503, 507, 508, 501}
list[8].count[19] = {30, 10, 5, 3, 10}
list[8].chance[19] = 20
list[8].gold[19] = 900000

list[8].dataID[20] = 169
list[8].guide[20] = {504, 503, 506, 508, 501, 500}
list[8].count[20] = {20, 10, 5, 5, 15, 10}
list[8].chance[20] = 19
list[8].gold[20] = 1000000

list[8].dataID[21] = 170
list[8].guide[21] = {504, 503, 506, 508, 501, 500}
list[8].count[21] = {25, 15, 8, 8, 20, 15}
list[8].chance[21] = 18
list[8].gold[21] = 1100000

list[8].dataID[22] = 171
list[8].guide[22] = {504, 506, 507, 508, 498, 501}
list[8].count[22] = {20, 10, 5, 10, 10, 10}
list[8].chance[22] = 17
list[8].gold[22] = 1200000

list[8].dataID[23] = 172
list[8].guide[23] = {504, 503, 505, 508, 499, 501}
list[8].count[23] = {20, 15, 25, 10, 20, 10}
list[8].chance[23] = 15
list[8].gold[23] = 1300000

list[10].dataID[1] = 539
list[10].guide[1] = {519, 520, 521, 522, 523, 547}
list[10].count[1] = {60, 30, 30, 40, 10, 1}
list[10].chance[1] = 100
list[10].gold[1] = 1000

list[10].dataID[2] = 540
list[10].guide[2] = {519, 520, 522, 523, 547}
list[10].count[2] = {50, 30, 30, 10, 1}
list[10].chance[2] = 100
list[10].gold[2] = 1000

list[10].dataID[3] = 541
list[10].guide[3] = {519, 521, 522, 523, 547}
list[10].count[3] = {50, 30, 30, 10, 1}
list[10].chance[3] = 100
list[10].gold[3] = 1000

list[10].dataID[4] = 543
list[10].guide[4] = {522, 523, 524, 548}
list[10].count[4] = {50, 40, 25, 1}
list[10].chance[4] = 100
list[10].gold[4] = 3000

list[10].dataID[5] = 544
list[10].guide[5] = {522, 520, 523, 524, 548}
list[10].count[5] = {40, 50, 30, 15, 1}
list[10].chance[5] = 100
list[10].gold[5] = 3000

list[10].dataID[6] = 545
list[10].guide[6] = {522, 521, 523, 524, 548}
list[10].count[6] = {40, 50, 30, 15, 1}
list[10].chance[6] = 100
list[10].gold[6] = 3000

list[11].dataID[1] = 467
list[11].guide[1] = {457}
list[11].count[1] = {500}
list[11].chance[1] = 100
list[11].gold[1] = 5000

list[11].dataID[2] = 468
list[11].guide[2] = {457}
list[11].count[2] = {600}
list[11].chance[2] = 100
list[11].gold[2] = 5000

list[11].dataID[3] = 469
list[11].guide[3] = {457}
list[11].count[3] = {400}
list[11].chance[3] = 100
list[11].gold[3] = 5000

list[11].dataID[4] = 470
list[11].guide[4] = {457}
list[11].count[4] = {540}
list[11].chance[4] = 100
list[11].gold[4] = 5000

list[11].dataID[5] = 463
list[11].guide[5] = {457}
list[11].count[5] = {700}
list[11].chance[5] = 100
list[11].gold[5] = 5000

list[11].dataID[6] = 428
list[11].guide[6] = {457}
list[11].count[6] = {2500}
list[11].chance[6] = 100
list[11].gold[6] = 1000000

local labelList = {}
labelList[66] = true
labelList[116] = true
labelList[172] = true
labelList[209] = true
labelList[316] = true

Server.GetTopic("create_postSel").Add(function(text)
	text = Utility.JSONParse(text)
	if list[text.category].dataID[text.sel] ~= nil then
		local bool = false
		for i=1, #list[text.category].guide[text.sel] do
			if unit.CountItem(list[text.category].guide[text.sel][i]) < list[text.category].count[text.sel][i] then
				bool = true
			end
		end
		if bool == false then
			if list[text.category].gold[text.sel] <= unit.gameMoney then
				local random = function(min, max)
					return rand(min, max+1)
				end
				for i=1, #list[text.category].guide[text.sel] do
					unit.RemoveItem(list[text.category].guide[text.sel][i], list[text.category].count[text.sel][i], false)
				end
				unit.UseGameMoney(list[text.category].gold[text.sel])
				if random(1, 10000) <= list[text.category].chance[text.sel]*100 then
					unit.AddItem(list[text.category].dataID[text.sel], 1)
					if label[list[text.category].dataID[text.sel]] == true then
						Server.SendCenterLabel(unit.player.name.." 님께서 "..Server.GetItem(list[text.category].dataID[text.sel]).name.." 제작에 성공하였습니다.")
					end
				else
					unit.SendCenterLabel("제작에 실패하였습니다.")
				end
			else
				unit.SendCenterLabel("소지금이 부족합니다.")
			end
		else
			unit.SendCenterLabel("재료 아이템이 부족합니다.")
		end
	else
		unit.SendCenterLabel("error")
	end
end)
